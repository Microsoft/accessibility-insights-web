# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.
steps:
    # e2e tests depend drop folder. run build:all will create said folder
    - script: yarn build:dev
      displayName: build:dev

    - script: yarn test:e2e -- --ci
      displayName: run e2e tests

    - task: PublishTestResults@2
      inputs:
          testResultsFiles: test-results/e2e/junit-e2e.xml
          testRunTitle: accessibility-insights-web e2e
      condition: always()
      displayName: publish e2e test results

    - task: PublishBuildArtifacts@1
      inputs:
          pathtoPublish: '$(System.DefaultWorkingDirectory)/test-results/e2e'
          artifactName: 'e2e-failure-screenshots'
      condition: always()
      continueOnError: true
      displayName: publish e2e-failure-screenshots
