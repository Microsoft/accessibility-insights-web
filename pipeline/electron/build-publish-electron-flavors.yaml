# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.
variables:
    stagingFolderName: builtproduct
steps:
    - script: yarn build:electron:all
      displayName: build all electron flavors

    - task: CopyFiles@2
      displayName: 'copy files to publish'
      inputs:
          SourceFolder: '$(System.DefaultWorkingDirectory)'
          Contents: |
              **/drop/**
              electron-builder.yml
              **/extension/icons/**
              **/src/electron/resources/**
              **/pipeline/scripts/**
          TargetFolder: '$(System.DefaultWorkingDirectory)/$(stagingFolderName)'
          CleanTargetFolder: true

    - task: PublishBuildArtifacts@1
      inputs:
          pathtoPublish: '$(System.DefaultWorkingDirectory)/$(stagingFolderName)'
          artifactName: '$(Agent.JobName)-product'
      displayName: publish built product
